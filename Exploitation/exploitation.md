## Exploitation

### Python Compatibility Issues in Exploits

Alguns exploits requerem bibliotecas específicas que podem ter problemas de compatibilidade com versões mais recentes do Python. No caso de exploits que utilizam a biblioteca **Salt**, por exemplo, ajustes podem ser necessários para garantir que tudo funcione corretamente.

#### Exemplo de Solução

```
# Criar um ambiente virtual para isolar a versão do Python
python3 -m venv env
. ./env/bin/activate

# Instalar dependências necessárias para o exploit
pip install distro salt

# Corrigir incompatibilidades na biblioteca Salt com Python 3.8+
sed -i 's/from platform import _supported_dists//' ./env/lib/python3.8/site-packages/salt/grains/core.py
sed -i 's/_supported_dists +=/_supported_dists =/' ./env/lib/python3.8/site-packages/salt/grains/core.py
```

Essas adaptações são para garantir a compatibilidade da biblioteca Salt com Python 3.8, o que permite que o exploit funcione corretamente no ambiente configurado.

### Default Credential Guessing

```bash
# Teste de credenciais padrão comuns (exemplo: admin:admin, root:root) para acessar painéis de administração e outros serviços.
# Essa etapa é fundamental pois muitos sistemas mantêm credenciais padrão, que representam uma vulnerabilidade crítica.
```

**Nota**: Tentar credenciais padrão é uma abordagem inicial essencial, pois muitos sistemas ainda utilizam configurações padrão, oferecendo acesso administrativo sem autenticação personalizada.


### Exploração de CMS (Content Management Systems)

Ao encontrar um CMS, é importante identificar a versão exata da aplicação, pois muitos CMS populares possuem vulnerabilidades publicamente conhecidas que podem ser exploradas. Seguem os passos recomendados:

1. **Identificar a Versão do CMS**: Busque a versão nas páginas de login, rodapé, ou nos arquivos de configuração acessíveis. Conhecer a versão é essencial para direcionar a pesquisa de exploits.

2. **Pesquisa de Exploits Públicos**: Utilize ferramentas como `searchsploit` para buscar exploits específicos para essa versão.
   ```bash
   # Atualiza o banco de dados do searchsploit
   searchsploit -u

   # Exemplo de busca e cópia de um exploit
   searshsploit Joomla 
   searchsploit -m <exploit_id>
   ```

3. **Verificar Necessidade de Autenticação**: Muitos exploits de CMS são autenticados, ou seja, requerem login para serem utilizados. Verifique se é necessário credenciais válidas antes de iniciar o exploit.

4. **Exploração Comum (RCE, File Upload Bypass, SQLi)**: CMS frequentemente possuem vulnerabilidades de execução remota de código (RCE), bypass no upload de arquivos, e injeção SQL (SQLi), que permitem controle sobre o sistema.

**Nota**: A exploração de CMS é uma etapa crítica em pentests, pois muitas vezes esses sistemas contêm dados sensíveis e controles administrativos. Use exploits com cautela, sempre verificando os requisitos e condições para a execução.

---

## Teste de RCE com Ping

### Passo 1: Executar o Exploit com Comando Ping
Execute o exploit com um comando `ping` apontando para o IP da sua máquina de ataque:

```
python3 exploit.py -c 'ping -c1 <IP_da_máquina_de_ataque>' -t <URL_do_alvo>
```

> Exemplo: `python3 exploit.py -c 'ping -c1 192.168.145.128' -t http://192.168.145.160/grav-admin`

### Passo 2: Capturar o Tráfego com tcpdump
Na máquina de ataque, use `tcpdump` para monitorar pacotes ICMP e verificar se o ping chega:

```
tcpdump -i <interface> icmp
```

> Exemplo: `tcpdump -i tun0 icmp`

### Resultado Esperado
Se o exploit funcionar, você verá pacotes `ICMP echo request` e `echo reply` no tcpdump, confirmando a execução do comando `ping` no alvo.

**Resumindo:**
1. **Exploit**: `python3 exploit.py -c 'ping -c1 <IP_atacante>' -t <URL_alvo>`
2. **Monitorar**: `tcpdump -i <interface> icmp`
3. **Confirmação**: Pacotes ICMP indicam sucesso do RCE.
